<!-- ---
title: '[PG] Clue'
date: 2025-04-07 9:19 +0900
categories: [hack,PG]
tags: []
--- -->

## information

![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-1.png>)
> port scan


![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image.png>)
3000端口发现挂载了Cassandra应用

![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-2.png>)
Cassandra存在一个任意文件读取漏洞，通过查看`/proc/self/cmdline`查看启动命令，获得凭据。
**cassie:SecondBiteTheApple330**
查看smb看到两个用户名
![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-3.png>)
8021端口是一个freeswitch应用，存在rce漏洞，但是需要密码，配合之前的文件包含漏洞使用
读取应用的配置文件获得密码。
![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-4.png>)
## user
![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-5.png>)
修改exp，获得反弹shell
**freeswitch:StrongClueConEight021**
![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-6.png>)
使用之前获得的密码得到`cassie`用户权限。
![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-7.png>)
sudo -l可以看到用户`cassie`有Cassandra应用root权限启动，开放后就可以以root权限利用先前找到的任意文件读取漏洞，读取id_rsa。
（但是实际上这里cassie目录下的id_rsa就已经是root的id_rsa了。

![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-8.png>)
读取`.bash_history`

![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-9.png>)

![alt text](<../assets/img/2025-04-06-[PG] Clue.assets/image-10.png>)


## conclusion
- 对目标要有整体的理解
- 对于web应用查看cmdline
- 留意`.bash_history`
- 渗透过程中，要清楚自己掌握了什么